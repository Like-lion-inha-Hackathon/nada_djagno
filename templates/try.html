{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/try.css' %}">
    <title>Document</title>
</head>
<body>
    <div class="emo-box" >
        <div ><i class="fas fa-plus plus icon fa-2x"></i></div>
        <ul class="menu">
            <li>
                <div class="emoji emoji--like">
                    <div class="emoji__hand">
                        <div class="emoji__thumb">
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <div class="emoji emoji--love">
                    <div class="emoji__heart">
                    </div>
                </div>
            </li>
            <li>
                <div class="emoji emoji--wow">
                    <div class="emoji__face">
                        <div
                            class="emoji__eyebrows">
                        </div>
                        <div class="emoji__eyes">
                        </div>
                        <div class="emoji__mouth">
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>

   
    <form action="{% url 'core:try' %}" method="POST">
        {% csrf_token %}
        <label for="username">USERNAME</label>
        <input id="username"  name="username" value={{variable}}><br>
        <label for="num1">20</label>
        <input id="num1" type="number" name="number1"><br>
        <label for="num2">21</label>
        <input id="num2" type="number" name="number2"><br>
        <label for="num3">22</label>
        <input id="num3" type="number" name="number3"><br>
        <label for="num4">23</label>
        <input id="num4" type="number" name="number4"><br>
        <label for="num5">24</label>
        <input id="num5" type="number" name="number5"><br>
        <label for="num6">25</label>
        <input id="num6" type="number" name="number6"><br>
        <label for="num7">26</label>
        <input id="num7" type="number" name="number7"><br>
        <label for="num8">27</label>
        <input id="num8" type="number" name="number8"><br>
        <label for="num9">28</label>
        <input id="num9" type="number" name="number9"><br>
        <label for="num10">29</label>
        <input id="num10" type="number" name="number10"><br>
        <button type="submit" >Submit</button>
    </form>
    

    <canvas id="line-chart" ></canvas>
    <canvas id="radar-chart" width="800" height="600"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="https://kit.fontawesome.com/4d118135bb.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/try.js' %}" ></script>
    <script>
        var chart = new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
            labels: [20,21,22,23,24,25,26,27,28,29],
            datasets: [{ 
                data: [5,1,6,6,7,1,3,9,8,8],
                label: "이두희",
                borderColor: "#3e95cd",
                fill: false
            }, { 
                data: [{{user|safe}}.user[0].num1,{{user|safe}}.user[0].num2,{{user|safe}}.user[0].num3,{{user|safe}}.user[0].num4,{{user|safe}}.user[0].num5,{{user|safe}}.user[0].num6,{{user|safe}}.user[0].num7,{{user|safe}}.user[0].num8,{{user|safe}}.user[0].num9,{{user|safe}}.user[0].num10],
                label: {{user|safe}}.user[0].username,
                borderColor: "#8e5ea2",
                fill: false
            }
        ]
        },
        options: {
            title: {
            display: true,
            text: 'Check your lifecycle graph with DooHee',
            fontSize: 50
            }
        }
    
        })
        canvas = document.querySelector("canvas")
        canvas.style.cssText="display:block; width:50vw; height:50vh;"
        console.log(chart)
        ;
    </script>
    <button onclick="getResponse()">Click Me!</button>
    <div id="user_div">
    </div>
    <script>
        function getResponse(){
            var xhr = new XMLHttpRequest();
            xhr.open("GET", '/json_data/', true);
            xhr.responseType = 'json';


//Send the proper header information along with the request

            xhr.onreadystatechange = function() { 
            if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                res = this.response
                user_list = res.user_list
                user_html = ""
                for (k in user_list){
                    user_html += `<span>${user_list[k].name}</span><br>`
                }
                document.getElementById('user_div').innerHTML = user_html
            }
        }
        xhr.send();
        }

    </script>
</body>
</html>